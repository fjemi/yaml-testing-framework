resources:
- &MODULE
  ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/process/casts/app.py
- &CHECKS
  module: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/checks/app.py
- &RESOURCE
  module: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/process/casts/resource.py


tests:
- function: process_cast_arguments
  description: Handles casting arguments used to call test function
  cast_arguments:
  - method: get_module
    << : *RESOURCE
    field: module
  tests:
  - description: Undefined arguments
    arguments:
      cast_arguments: null
      module: null
      arguments: null
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        arguments: null
  - description: Cast arguments is empty
    arguments:
      cast_arguments: []
      << : *RESOURCE
      arguments: arguments
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        arguments: arguments
  - description: Cast string arguments as integer
    arguments:
      cast_arguments:
      - method: __builtins__.int
        << : *RESOURCE
      arguments: '0000'
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        arguments: 0
  - description: Cast specific key/value in dictionary
    arguments:
      cast_arguments:
      - method: __builtins__.int
        << : *RESOURCE
        field: key
      arguments:
        key: '0000'
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        arguments:
          key: 0
- function: process_cast_output
  description: Handles casting the output from calling the function to test
  cast_arguments:
  - method: resource.get_module
    << : *RESOURCE
    field: module
  tests:
  - description: Undefined arguments
    arguments:
      cast_output: null
      module: null
      output: null
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        output: null
  - description: Cast output is an empty list
    arguments:
      cast_output: []
      module: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/app/resources/app.py
      output: output
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        output: output
  - description: Cast output as a string
    arguments:
      cast_output:
      - method: __builtins__.str
        << : *RESOURCE
      output: 1
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        output: '1'
  - description: Cast specific field in output of type simple name space
    cast_arguments:
    - method: sns
      unpack: true
      field: output
    arguments:
      cast_output:
      - method: __builtins__.int
        << : *RESOURCE
        field: key
      module: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/app/resources/app.py
      output:
        key: '0000'
    checks:
    - method: check_sns
      << : *CHECKS
      field: output
      expected:
        key: 0
- function: main
  description: Returns the resulting of casting an object
  tests:
  - description: Undefined arguments
    arguments: {}
    checks:
    - method: check_equals
      << : *CHECKS
      expected: null
  - cast_arguments:
    - method: resource.get_module
      << : *RESOURCE
      field: module
    tests:
    - description: Cast string as integer
      arguments:
        << : *RESOURCE
        casts:
        - method: __builtins__.int
          << : *RESOURCE
        object: '1111'
      checks:
      - method: check_equals
        << : *CHECKS
        expected: 1111
    - description: Cast dict as simple name space
      arguments:
        << : *RESOURCE
        casts:
        - method: cast_dict_as_sns
          << : *RESOURCE
        object:
          key: value
      checks:
      - method: check_sns
        << : *CHECKS
        expected:
          key: value
    - description: Cast list into string with unpacking
      arguments:
        << : *RESOURCE
        casts:
        - method: cast_list_to_string
          << : *RESOURCE
          unpack: true
        object: [a, b, c]
      checks:
      - method: check_equals
        << : *CHECKS
        expected: abc
- function: process_casts
  description: Handles processing cast objects
  tests:
  - description: Undefined arguments
    arguments: {}
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        result: null
  - description: Cast integer to string
    arguments:
      casts:
      - method: __builtins__.str
      object: 1
      << : *RESOURCE
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        result: '1'
  - description: Cast field within the object
    arguments:
      casts:
      - method: __builtins__.str
        field: key
      object:
        key: 0
      << : *RESOURCE
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        result:
          key: '0'
- function: format_data
  tests:
  - description: Undefined arguments
    arguments: {}
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        field: null
        method: null
        module: null
        object: null
        result: null
        temp_object: null
        unpack: null
  - description: Defined arguments. Prefer level data.
    arguments:
      module: arguments.module
      object: arguments.object
      item: {}
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        field: ''
        method: null
        module: arguments.module
        object: arguments.object
        result: null
        temp_object: null
        unpack: false
  - description: Defined arguments. Prefer item level data.
    arguments:
      module: arguments.module
      object: arguments.object
      item:
        module: item.module
        object: item.object
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        field: ''
        method: null
        module: item.module
        object: arguments.object
        result: null
        temp_object: null
        unpack: false
- function: do_nothing
  description: Returns a null object
  arguments:
    a: a
  checks:
  - << : *CHECKS
    method: check_equals
    expected: null
- function: get_cast_method
  description: >
    Returns a casting method and name if the method exists in a module.
    Otherwise, returns the name and a log
  cast_arguments:
  - field: module
    << : *RESOURCE
    method: module_resource
  tests:
  - description: Undefined data
    arguments: {}
    checks:
    - method: check_function
      << : *CHECKS
      field: method
      expected:
        name: do_nothing
        location: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/process/casts/app.py
  - description: Return the str class from builtins
    arguments:
      method: __builtins__.str
      << : *RESOURCE
    checks:
    - method: check_equals
      << : *CHECKS
      field: method.__name__
      expected: str
  - description: Return the int class from builtins
    arguments:
      method: __builtins__.int
      << : *RESOURCE
    checks:
    - method: check_equals
      << : *CHECKS
      field: method.__name__
      expected: int
  - description: >
      Return function sh`pass_through` from the module sh`resources.py` in the
      resources directory
    arguments:
      method: pass_through
      << : *RESOURCE
    checks:
    - method: check_function
      << : *CHECKS
      field: method
      expected:
        name: pass_through
        location: ${YAML_TESTING_FRAMEWORK_ROOT_DIR}/main/process/casts/resource.py
  - description: Method not in module
    arguments:
      method: does_not_exist
      << : *RESOURCE
    checks:
    - method: check_function
      << : *CHECKS
      field: method
      expected:
        name: do_nothing
        location: *MODULE
- function: get_temp_object
  description: Set a temporary object as the object to cast or field within it
  tests:
  - description: Undefined arguments
    arguments: {}
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        temp_object: null
  - description: Field is undefined and object is defined
    arguments:
      object: object
      field: null
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        temp_object: object
  - description: Object is a dict and field is an existing key
    arguments:
      object:
        key: value
      field: key
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        temp_object: value
- function: reset_object
  description: Sets temp object as the object or a field within the object
  tests:
  - description: Undefined arguments
    arguments: {}
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        None: null
  - description: Set object as temp object
    arguments:
      temp_object: temp_object
      object: object
      field: null
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        object: temp_object
        temp_object: null
  - description: Set object a non-existing field as temp object
    arguments:
      temp_object: temp_object
      object: {}
      field: key
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        object:
          key: temp_object
        temp_object: null
  - description: Set object an existing field as temp object
    arguments:
      temp_object: temp_object
      object:
        key: value
      field: key
    checks:
    - method: check_sns
      << : *CHECKS
      expected:
        object:
          key: temp_object
        temp_object: null
